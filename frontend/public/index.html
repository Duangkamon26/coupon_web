<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Itim&display=swap">
    <script defer src="main.js"></script>
    <title>Coupon Website</title>
    
    <script>
        // เมื่อมีการเปลี่ยนค่าใน radio buttons
        function handleRadioChange() {
            var selectedValue = document.querySelector('input[name="inlineRadioOptions"]:checked').value;
            var dateFields = document.querySelectorAll('.date-fields');
            var dayFields = document.querySelectorAll('.day-fields');
    
            // ซ่อนทุก field ของวันที่
            dateFields.forEach(function (dateField) {
                dateField.style.display = 'none';
            });
    
            // ซ่อนทุก field ของวัน
            dayFields.forEach(function (dayField) {
                dayField.style.display = 'none';
            });
    
            // แสดง field ตามที่ถูกเลือก
            if (selectedValue === 'option1') {
                dateFields.forEach(function (dateField) {
                    dateField.style.display = 'block';
                });
            } else if (selectedValue === 'option2') {
                dayFields.forEach(function (dayField) {
                    dayField.style.display = 'block';
                });
            }
        }
    </script>
    

</head>
<body>
    <div class="menu-wrapper _fixed menu_translatex_0_first">
        <a href="#" class="logo">
            <img class="logo-img" style="width: 88px; height: 88px;" src="https://one-thailand.com/assets/img/logoback.png?lastmod=1700105349"onerror="this.src='https://placehold.co/50x50?text=no image';">
        </a>
        
        <!-- เพิ่มเมนูตรงนี้ -->
        <a href="#">Home</a>
    </div>

    <div class="content">
        <!-- เนื้อหาหลักของเว็บไซต์ -->
        <form class="row g-3">
            <!-- ลิงค์ไปยังหน้าอื่น -->
            <a href="home.php">ย้อนกลับ</a>
            <div class="message-box row">
                <p>ข้อมูลส่วนลด</p>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="countyInput" class="form-label">อำเภอ/เมือง *</label>
                    </div>
                    <select id="countyInput" name="county" class="form-select" aria-label="County" required>
                        <option selected>   </option>
                        <option value="1">.......</option>
                        <option value="2">ทับสะแก</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="displayType" class="form-label">ประเภทการแสดง *</label>
                    </div>
                    <select id="displayType" class="form-select" aria-label="Display Type" required>
                        <option selected>   </option>
                        <option value="1">แสดงหน้าใช้คูปอง</option>
                        <option value="2">ค้นหา</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="coupon_codeInput" class="form-label">Coupen Code *</label>
                    <input type="text" class="form-control" id="coupon_codeInput" name="coupon_code" required>
                </div>
                <div class="col-md-6">
                    <label for="inputPassword4" class="form-label">รายละเอียดแบบสั้น *</label>
                    <input type="text" class="form-control" id="inputAddress" required>
                </div>
                <div class="col-12">
                    <label for="inputAddress" class="form-label">รายละเอียดแบบเต็ม *</label>
                    <input type="text" class="form-control" id="inputAddress" required>
                </div>
                <div class="mb-3">
                    <label for="formFile" class="form-label">รูปคูปอง</label>
                    <input class="form-control" type="file" id="formFile" required>
                </div>
            </div>
            

            <div class="message-box row">
                <p>ข้อมูลวันที่ใช้งานส่วนลด</p>
                <div class="d-flex align-items-center">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" onchange="handleRadioChange()">
                        <label class="form-check-label" for="inlineRadio1">เลือกวันที่</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" onchange="handleRadioChange()">
                        <label class="form-check-label" for="inlineRadio2">เลือกวัน</label>
                    </div>
                </div>
                <div class="col-md-6 date-fields">
                    <label for="creation_dateInput" class="form-label">วันเริ่มต้น</label>
                    <input type="date" class="form-control" id="creation_dateInput" name="creation_date">
                </div>
                <div class="col-md-6 date-fields">
                    <label for="expiration_dateInput" class="form-label">วันหมดอายุ</label>
                    <input type="date" class="form-control" id="expiration_dateInput" name="expiration_data">
                </div>
                <div class="col-md-6 date-fields">
                    <label for="inputEmail4" class="form-label">เวลาเริ่มต้น (เริ่มที่ 00:00)</label>
                    <input type="time" class="form-control" id="exampleInputTime" name="exampleInputTime">
                </div>
                <div class="col-md-6 date-fields">
                    <label for="inputPassword4" class="form-label">เวลาสิ้นสุด (เริ่มที่ 23:59)</label>
                    <input type="time" class="form-control" id="exampleInputTime" name="exampleInputTime">
                </div>
                <div class="col-md-6 day-fields">
                    <label for="creation_dateInput" class="form-label">วันเริ่มต้น</label>
                    <input type="date" class="form-control" id="creation_dateInput" name="exampleInputDate">
                </div>
                <div class="col-md-6 day-fields">
                    <label for="expiration_dateInput" class="form-label">วันหมดอายุ</label>
                    <input type="date" class="form-control" id="expiration_dateInput" name="exampleInputDate">
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      จันทร์
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      อังคาร
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      พุธ
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      พฤหัสบดี
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      ศุกร์
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      เสาร์
                    </label>
                </div>
                <div class="form-check day-fields">
                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                      อาทิตย์
                    </label>
                </div>
            </div>

            <div class="message-box row">
                <p>ข้อมูลเงื่อนไขส่วนลด</p>
                <div class="col-md-3">
                    <label for="inputEmail4" class="form-label">ระยะทางเริ่มต้น</label>
                    <input type="text" class="form-control" id="inputAddress">
                </div>
                <div class="col-md-3">
                    <label for="inputPassword4" class="form-label">ระยะทางสิ้นสุด</label>
                    <input type="text" class="form-control" id="inputAddress">
                </div>
                <div class="col-md-3">
                    <label for="district" class="form-label">ประเภทคูปอง</label>
                    <select id="district" class="form-select" aria-label="District">
                        <option selected>   </option>
                        <option value="1">.......</option>
                        <option value="2">ส่วนลดครั้งแรก</option>
                        <option value="3">ส่วนลดพิเศษ</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="couponTypeInput" class="form-label">ประเภทส่วนลด</label>
                    <select id="couponTypeInput" class="form-select" aria-label="District">
                        <option selected>   </option>
                        <option value="1">.......</option>
                        <option value="2">ส่วนลดราคาทั้งหมด (ราคาอาหาร + ค่าจัดส่ง)</option>
                        <option value="3">ส่วนลดค่าจัดส่ง</option>
                        <option value="4">ส่วนลดค่าบริการ</option>
                        <option value="5">ส่วนลดราคาอาหาร</option>
                        <option value="6">ส่วนลดค่าจัดส่งแบบระบุระยะทาง</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="couponNumberInput" class="form-label">จำนวนคูปอง</label>
                    <input type="text" class="form-control" id="couponNumberInput">
                </div>
                <div class="col-md-4">
                    <label for="district" class="form-label">ประเภทการระบุมูลค่าส่วนลด</label>
                    <select id="district" class="form-select" aria-label="District">
                        <option selected>   </option>
                        <option value="1">ระบุมูลค่า (ปกติ)</option>
                        <option value="2">ระบุช่วงมูลค่า</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="district" class="form-label">ประเภทการระบุมูลค่าส่วนลด</label>
                    <div class="d-flex align-items-center">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefaul"> ราคาอาหาร </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefaul"> ค่าจัดส่ง </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault"> ค่าบริการ </label>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <label for="discount_value" class="form-label">มูลค่ารถเข็นขั้นต่ำ (ไม่จำเป็น) </label>
                    <input type="text" class="form-control" id="discount_value">
                </div>
                <div class="col-md-2">
                    <label for="discount_valueInput" class="form-label">มูลค่าส่วนลด *</label>
                    <input type="text" class="form-control" id="discount_valueInput" required>
                </div>
                <div class="col-md-3">
                    <label for="district" class="form-label">ประเภทส่วนลด *</label>
                    <select id="district" class="form-select" aria-label="District" required>
                        <option selected>   </option>
                        <option value="1">.....</option>
                        <option value="2">เปอร์เซ็น % </option>
                        <option value="3">ลดตามราคาที่ระบุ </option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="inputEmail4" class="form-label">ส่วนลดสูงสุด (ไม่จำเป็น)</label>
                    <input type="text" class="form-control" id="inputAddress">
                </div>
                <div class="col-md-3">
                    <label for="district" class="form-label">ลูกค้าใช้คูปองซ้ำ *</label>
                    <select id="district" class="form-select" aria-label="District" required>
                        <option selected>   </option>
                        <option value="1">.....</option>
                        <option value="2">ไม่ได้</option>
                        <option value="3">ได้</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="usage_statusInput" class="form-label">สถานะ *</label>
                    <select id="usage_statusInput" class="form-select" aria-label="District" required>
                        <option selected>   </option>
                        <option value="1">.....</option>
                        <option value="2">เปิดใช้งาน</option>
                        <option value="3">ปิดใช้งาน</option>
                    </select>
                </div>
            </div>
            <div class="message-box row">
                <p>เลือกร้านที่ใช้ส่วนลด</p>
                <div class="col-md-4">
                    <label for="district" class="form-label">ประเภทร้านค้า</label>
                    <select id="district" class="form-select" aria-label="District">
                        <option selected>   </option>
                        <option value="1">เลือกร้านเอง</option>
                        <option value="2">เลือกประเภทร้าน</option>
                        <option value="3">เลือกกลุ่มร้าน</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="district" class="form-label">  </label>
                    <div class="d-flex align-items-center">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefaul">ใช้คูปองอัตโนมัติ</label>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <label for="storeInput" class="form-label">เลือกร้านค้า</label>
                    <input type="text" class="form-control" id="storeInput" name="store" required>
                </div>
            </div>
            <div class="message-box row">
                <p>เลือกลูกค้าที่ใช้ส่วนลด</p>
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefaul">เลือกลูกค้า</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex gap-2 justify-content-center">
                <a href="home.php"><button class="btn btn-danger" type="button">ย้อนกลับ</button></a>
                <!-- <button class="btn btn-success" type="button" onclick="save_data()">บันทึก</button> -->
                <div class="d-flex gap-2 justify-content-center">
                    <!-- <input type="button" id="submitButton" value="Save" onclick="submitForm()"> -->
                    <a href=" "><button id="saveButton" value="Save" class="btn btn-success" type="submit" onclick="saveDataToBackend()">บันทึก</button></a>
                    

                </div>
            </div>
        </form>
    </div>
    
    <!-- <script>
        function saveDataToBackend() {
            const form = document.getElementById('myForm');
            const formData = new FormData(form);
    
            fetch('save_data.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                console.log(data); // แสดงข้อความจาก backend
    
                // หลังจากบันทึกเรียบร้อย ให้ redirect ไปยังหน้า home.php (ตามที่คุณต้องการ)
                window.location.href = 'home.php';
            })
            .catch(error => console.error('เกิดข้อผิดพลาดในการส่งข้อมูล:', error));
        }
    
        function submitForm() {
            const form = document.getElementById('myForm');
            const formData = new FormData(form);
    
            fetch('http://localhost/coupon_web/frontend/public/save_data.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                alert(data); // แสดงข้อความจาก server
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script> -->
    
    <script>
        function save_data() {
            const county = document.getElementById('county').value;
            const coupon_code = document.getElementById('coupon_code').value;
            const couponType = document.getElementById('couponType').value;
            const discount_value = document.getElementById('discount_value').value;
            const couponNumber = document.getElementById('couponNumber').value;
            const creation_date = document.getElementById('creation_date').value;
            const expiration_date = document.getElementById('expiration_data').value;
            const store = document.getElementById('store').value;
            const usage_status = document.getElementById('usage_status').value;

            // ส่งข้อมูลไปยังไฟล์ save_data.php ที่อยู่ในฝั่ง backend
            fetch('save_data.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `county=${county}&coupon_code=${coupon_code}&couponType=${couponType}&discount_value=${discount_value}&couponNumber=${couponNumber}&creation_date=${creation_date}&expiration_date=${expiration_date}&store=${store}&usage_status=${usage_status}`,
            })
            .then(response => response.text())
            .then(data => {
                console.log(data); // แสดงข้อความจาก backend

                // หลังจากบันทึกเรียบร้อย ให้ redirect ไปยังหน้า home.php
                window.location.href = 'home.php';
            })
            .catch(error => console.error('เกิดข้อผิดพลาดในการส่งข้อมูล:', error));
        }
        // Example of handling form submission using AJAX
        function submitForm() {
            var formData = new FormData(document.getElementById("myForm"));

            // Example using fetch API for asynchronous request
            fetch('http://localhost/coupon_web/backend/save_data.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                alert(data); // Show response from server
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>

</body>
</html>
